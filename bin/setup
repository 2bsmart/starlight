#!/bin/sh
set -e

GREEN='\033[0;32m'
RED='\033[0;31m'
NC='\033[0m'

printf "\n${GREEN}*** Starting the zokrates container ***${NC}\n"

docker-compose up -d zokrates

sleep 5

printf "\n${GREEN}*** Running setup for your ZApp... ***${NC}\n"

docker-compose run zappify node /app/src/utils/zkp-setup.mjs -i assign

printf "\n${GREEN}*** Setup complete! Writing verification key to db... ***${NC}\n"

docker-compose run zokrates node /app/write-vk.mjs -i assign

printf "\n${GREEN}*** Finished! ***${NC}\n"
